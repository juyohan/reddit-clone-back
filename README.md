# BookRed   

### 💻  목차
* [🗣 프로젝트 소개](#-프로젝트-소개)
* [💾 DB Schema](#-DB-Schema)
* [🏫 사용한 기술](#-사용한 기술-)
* [📀 프로젝트 배포](#-프로젝트-배포)
* [🤖 주요 기능](#-주요-기능)
* [📄 프로젝트 기술](#-프로젝트-기술)
  - [JWT (Json Web Token)](#jwt-json-web-token)
  - [OAuth2](#oauth2)

## 🗣 프로젝트 소개   
미국에서 운영중인 커뮤니티 사이트 [__레딧__](www.reddit.com, "Go Reddit"), `쓰레드 플로트형` & `피드형` 게시판을 모티브로 한 프로젝트입니다.
</br>
</br>

## 💾 DB Schema
<img width="933" alt="스크린샷 2021-11-27 오후 11 26 52" src="https://user-images.githubusercontent.com/20573091/143685551-52ec5b91-19fa-4752-8d61-e5234b1fb89a.png">

## 🏫 사용한 기술
- *Spring boot*
  - *JPA (Java Persistence API) & JPQL (Java Persistence Query Language)*
  - *JWT (Json Web Token)*
  - *OAuth2*
  - *Mysql*
  - *Redis*

</br>

## 📀 프로젝트 배포       

</br>
</br>

## 🤖 주요 기능

</br>
</br>

## 📄 프로젝트 기술

### JWT (Json Web Token)
 - 로그인 기능을 추가를 하려고 했을 때, 맨 처음엔 그저 비밀번호를 암호화를 시켜놓고 DB에 저장한 뒤, `passwordEncoder.matches()`의 메소드를 통해 일치 여부를 확인하고 일치하면 로그인 성공, 아니면 실패로 구현함.
 - 하지만 로그인에 성공을 한 뒤, 사용자한테 요청이 왔을 경우 해당 요청이 로그인한 사용자에게 요청이 왔는지, 아닌지를 판별하기 어렵다고 생각함.
 - 따라서 JWT의 기능을 도입시켜 로그인을 한 뒤, 로그인을 한 사용자가 요청을 보냈는지, 아닌지에 대한 판별을 할 수 있게 만들었음.
 - `Access-Token` 과 `Refresh-Token` 이렇게 두가지의 토큰을 통해, 보안성을 높이는 방법이 상용화가 되어있는 것을 보았음. 하지만, 가장 기본적인 Access-Token 만을 사용해서 기능이 제대로 구현이 되는지를 확인하고 추가하려고 함.
 - 만약, 사용자가 보낸 요청에 JWT의 유효기간이 10분보다 적게 남아있다면, 다시 새로운 토큰을 발급을 해줌.
 - 토큰이 탈취당할 가능성을 생각해 토큰 Claim에는 사용자의 권한만 추가를 해놓았고 Subject의 같은 경우 닉네임만 추가를 해놓았음.
 - 요청이 온 토큰에 검증 단계에서 실패를 하게 된다면, 요청을 거절하고 로그로 에러를 표시해둠.

### OAuth2
- 카카오 로그인을 구현시키기 위해서 Spring Boot에서 지원을 해주는 OAuth2 프레임워크를 사용을 하게 되었음.
- 맨 처음엔 OAuth2를 사용하는게 아닌, 쌩으로 사용자가 카카오 서버에 `인가코드`를 요청하고, 받은 인가코드를 서버에서 받으면, 인가코드를 다시 카카오 서버로 요청을 보내서 `토큰`을 발급받고, 발급받은 토큰을 카카오 서버로 요청을 보내 `사용자의 정보`를 가져온 뒤, 연동이 되어있는지 확인하는 순서로 기능을 구현했음.
- 
